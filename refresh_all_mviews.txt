ОПИСАНИЕ
----------
Сценарий refresh_all_mviews.sql предназначен для запуска в 
среде  SQL*Plus и выполняет полную регенерацию (complete refresh) 
материализованных представлений в текущей схеме пользователя.
Данная операция необходима после выполнения восстановления 
БД на определенный момент времени (point in time recovery) или
в других случаях, когда выполнение быстрой регенерации (fast 
refresh) материализованных представлений не представляется 
возможным. Процедура выполняет отключение (disable) правил 
целостности внешнего ключа (foreign key) на момент выполнения
полного обновления материализованных представлений. По окончению
работы отключенные внешние ключи включаются вновь в режиме 
NOVALIDATE, т.е. без проверки существующих данных в таблице,
но с проверкой правила для вновь добавляемых в таблицу строк.


ПОЛНАЯ РЕГЕРЕРАЦИЯ
----------------------------
а. Интерактивный режим

1. Войти в SQL*Plus
2. Соединиться под пользователем-собственником материализованных
   представлений.
3. Выполнить сценарий refresh_all_mviews.sql   

sqlplus /nolog
	
CONNECT ius/ius@gxpk
	
SPOOL crefresh.log
@refresh_all_mviews.sql   
SPOOL OFF
	
За процессом регенерации материализованных представлений можно 
наблюдать открыв еще один сеанс SQL*Plus и обратившись к 
представлению V$SESSION запросом:


set linesize 120
col username for a20
col osuser for a20
col module for a20
col action for 50
SELECT username, osuser, MODULE, action
    FROM v$session
  WHERE MODULE = '@refresh_all_mviews'; 

б. Пакетный режим

sqlplus ius/ius@gxpk @refresh_all_mviews > crefresh.log

ПРИМЕЧЕНИЕ
------------
Полная регенерация материализованных представлений порождает выполнение
TRUNCATE операции над моментальными копиями. Поскольку TRUNCATE относится
к классу команд DDL, необходимо выполнить перекомпиляцию зависимых от них
программных объектов: пакетов, процедур, функций, представлений. Сделать это
можно при помощи командного файла utlrp.sql или пакетной процедуры 
DBMS_UTILITY.COMPILE_SCHEMA(user). Последняя процедура не выполняет 
перекомпиляцию представлений (view).